!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["locize-editor"]=e()}(this,function(){"use strict";function t(t){return null!=t&&t===t.window}function e(e){return t(e)?e:9===e.nodeType&&e.defaultView}function n(t){var n,i,o={top:0,left:0,right:0,bottom:0},c=t&&t.ownerDocument;n=c.documentElement,"undefined"!==r(t.getBoundingClientRect)&&(o=t.getBoundingClientRect()),i=e(c);var s=o.top+i.pageYOffset-n.clientTop,l=o.left+i.pageXOffset-n.clientLeft;return{top:s,left:l,right:l+(o.right-o.left),bottom:s+(o.bottom-o.top)}}function i(t){var e=void 0,i=void 0;if(t.originalEvent&&t.originalEvent.explicitOriginalTarget)e=t.originalEvent.explicitOriginalTarget;else{for(var o=t.srcElement,r=t.pageX,c=t.pageY,s=(n(o),0),l=void 0,d=0;d<o.childNodes.length;d++){var a=o.childNodes[d],f=n(a);1===a.nodeType&&f.bottom<c&&(s=d+1),!l&&f.top+(a.clientHeight||0)>c&&(l=d)}s+1>o.childNodes.length&&(s=o.childNodes.length-1),l||(l=o.childNodes.length);for(var u=s;u<l;u++){var p=o.childNodes[u],h=n(p);if(!i&&h.left>r){e=o.childNodes[u-1];break}e=p}}return e}function o(t,e,n){var i=n.options.defaultNS,o=n.options.nsSeparator;if(t.indexOf(o)>-1)i=t.split(o)[0];else{var r=void 0,c=function t(e){var n=e.getAttribute&&e.getAttribute("i18next-options");if(n){var i={};try{i=JSON.parse(n)}catch(t){}i.ns&&(r=i.ns)}!r&&e.parentElement&&t(e.parentElement)};c(e),r&&(i=r)}return i}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c={init:function(t){var e=this;this.subscriber=[],this.i18next=t,setTimeout(function(){e.on()},100),this.locizeInstance=window.open("/receiver"),window.subscribeLocizeEditor=this.subscribe.bind(this)},subscribe:function(t){this.subscriber.push(t)},handler:function(t){var e=this,n=i(t);if(n){var r=n.textContent||n.text.innerText,c=r.replace(/\n +/g,"");console.warn(n,c),console.warn(o(c,n,this.i18next)),console.warn("projectId",this.i18next.options.backend.projectId),console.warn("language",this.i18next.languages[0]),this.subscriber.forEach(function(t){t(e.i18next.options.backend.projectId,e.i18next.languages[0],o(c,n,e.i18next),c)})}},on:function(){document.body.addEventListener("click",this.handler.bind(this))},off:function(){document.body.removeEventListener("click",this.handler.bind(this))}};return c});
